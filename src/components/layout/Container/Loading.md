# 画面遷移アニメーションメモ

## ContentWrap コンポーネント
ページ間で変わる部分のコンテンツをラップしたコンポーネント。

画面遷移開始と終了のトリガー処理を行う。

開始と終了は基本的にかなり狭い間隔で実行されるので最初から開始だけとってタイムライン制御にしてもよいのだが、まれに次のページ内の取得が遅れることがあるので、AnimatePresenceでしっかり終了のタイミングを設定している。

ルーターに開始の登録はどのコンポーネントで行っても問題ないが、わかりやすいのでここに書いている。

## Loading コンポーネント
ローディング時に画面全体をオーバーレイするコンポーネント。

初回ランディング時のみ store に dispatch するが、画面遷移時には状態管理と関心を切り離している。
基本的にローディングアニメ開始と終了がかなり近い感覚で実行されるので、開始のアニメーション全体と終了のアニメーションのディレイを同じになるように設定する。

## ポイント
主に、
- 状態管理のローディングが false になるタイミングでページ内のコンテンツのアニメーションを開始できるようにしたい（厳密にとりたい）
- 戻るボタンでもローディングが開始されるようにしたい
ということから、このような構成になっている。
